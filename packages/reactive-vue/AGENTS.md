# Reactive Vue Guide (extends root `AGENTS.md`)

This package re-exports Formily’s reactivity bindings for Vue 3. Follow the global conventions defined in the repository root, then apply the details below when working inside `packages/reactive-vue`.

## Source Layout

- `src/` mirrors the public API surface. Do not import from `dist/` or reach into other packages’ `src/` folders.
- `dist/` is generated by Tsdown (`pnpm build`). Treat it as read-only—changes there will be discarded.
- Keep the package self-contained: if a helper is useful to other packages, promote it into `packages/docs-toolkit` or another shared workspace before consuming it here.

## Commands

| Script                      | When to run                                                    | Notes                                                                            |
| --------------------------- | -------------------------------------------------------------- | -------------------------------------------------------------------------------- |
| `pnpm build`                | Before publishing or when other packages need fresh artifacts  | Runs Tsdown (Rolldown) to emit ESM + d.ts into `dist/`.                          |
| `pnpm dev`                  | Local development                                              | `tsdown --watch`; re-builds on change, but still writes into `dist/`.            |
| `pnpm test`                 | Before merging behavior changes                                | Executes Vitest. Add/maintain specs beside source files as `*.spec.ts`.          |
| `pnpm typecheck`            | Whenever TypeScript config changes or you see editor anomalies | Uses `tsc --noEmit`; no incremental cache is configured, so expect a full check. |
| `pnpm format` / `pnpm lint` | Required before commits                                        | Delegated through root Turborepo tasks to ensure ESLint passes.                  |

## Coding Conventions

- Stick to Composition API utilities—avoid mixing legacy Formily Vue 2 constructs.
- Keep reactivity helpers pure; anything with side effects belongs in `src/shared/effects`.
- Export through `src/index.ts` only. If you need sub-path exports, add them to `package.json#exports`.
- Peer dependencies (`@formily/reactive`, `vue`) are externalized at build time. Don’t bundle them.

## Testing & Verification

- Favor Vitest unit tests for new helpers; create minimal fixtures under `tests/` if you need integration coverage.
- Document manual scenarios (Vue + Formily versions, schema snippet) in PR descriptions until automated tests cover the cases.
- Before `pnpm release`, run `pnpm build && pnpm test && pnpm typecheck` and inspect `dist/` for unexpected diffs.

## Docs Dependencies

- Changes that affect public behavior should be reflected in the Reactive Vue docs (`apps/reactive-vue-docs`). Update demos/markdown there and keep the changelog in sync.
- If the docs site moves to another repo, note the new location inside this file so future contributors know where to adjust examples.
